angular.module("jkuri.timepicker",[]).directive("ngTimepicker",["$document",function(e){var n=function(e,n){e.initTime=n.initTime||"11:00",e.initMeridian=n.initMeridian||"AM",e.step=n.step||"15",e.showMeridian=e.$eval(n.showMeridian)||!1,e.meridian=n.meridian||"AM",e.theme=n.theme||""};return{restrict:"EA",scope:!0,require:"?ngModel",link:function(t,i,r,a){n(t,r),t.opened=!1;var s=function(){var e=t.initTime.split(":");t.hour=e[0],t.minutes=e[1]},u=function(){var e;e=t.hour+":"+t.minutes,t.showMeridian?(t.viewValue=e+" "+t.meridian,e=o()+":"+t.minutes,a.$setViewValue(e)):(t.viewValue=e,a.$setViewValue(e))},o=function(){var e=parseInt(t.hour,10),n=t.meridian;return 12===e&&"PM"===n?"12":12===e&&"AM"===n?"00":"PM"===n?e+12:10>e?"0"+e:e},c=function(){var e=t.initTime.split(":");t.hour=e[0],t.minutes=e[1];var n=t.hour+":"+t.minutes;t.showMeridian?(t.viewValue=n+" "+t.initMeridian,n=o()+":"+t.minutes,a.$setViewValue(n)):(t.viewValue=n,a.$setViewValue(n))};t.showTimepicker=function(){t.opened=!0},t.incrementHour=function(){t.showMeridian?parseInt(t.hour,10)<12?t.hour=parseInt(t.hour,10)+1:12===parseInt(t.hour,10)&&(t.hour=1,t.toggleMeridian()):parseInt(t.hour,10)<23?t.hour=parseInt(t.hour,10)+1:t.hour=0,parseInt(t.hour,10)<10&&(t.hour="0"+t.hour),u()},t.decreaseHour=function(){t.showMeridian?0===parseInt(t.hour,10)?(t.hour=12,t.toggleMeridian()):t.hour=parseInt(t.hour,10)-1:0===parseInt(t.hour,10)?t.hour=23:t.hour=parseInt(t.hour,10)-1,parseInt(t.hour,10)<10&&(t.hour="0"+t.hour),u()},t.incrementMinutes=function(){t.minutes=parseInt(t.minutes,10)+parseInt(t.step,10),t.minutes>59&&(t.minutes="00",t.incrementHour()),u()},t.decreaseMinutes=function(){t.minutes=parseInt(t.minutes,10)-parseInt(t.step,10),parseInt(t.minutes,10)<0&&(t.minutes=60-parseInt(t.step,10),t.decreaseHour()),0===parseInt(t.minutes,10)&&(t.minutes="00"),u()},t.toggleMeridian=function(){t.meridian="AM"===t.meridian?"PM":"AM",u()},e.on("click",function(e){i===e.target||i[0].contains(e.target)||t.$apply(function(){t.opened=!1})}),$(".ng-timepicker").on("reset",function(e){c()}),s(),u()},template:'<input type="text" ng-focus="showTimepicker()" ng-value="viewValue" class="ng-timepicker-input" ng-readonly="true"><div class="ng-timepicker" ng-show="opened" ng-class="{\'red\': theme === \'red\', \'green\': theme === \'green\', \'blue\': theme === \'blue\'}">  <table>    <tbody>    <tr>        <td class="act noselect" ng-click="incrementHour()"><i class="fa fa-angle-up"></i></td>        <td></td>        <td class="act noselect" ng-click="incrementMinutes()"><i class="fa fa-angle-up"></i></td>        <td class="act noselect" ng-click="toggleMeridian()" ng-show="showMeridian"><i class="fa fa-angle-up"></i></td>      </tr>      <tr>        <td><input type="text" ng-model="hour" ng-readonly="true"></td>        <td>:</td>        <td><input type="text" ng-model="minutes" ng-readonly="true"></td>        <td ng-show="showMeridian"><input type="text" ng-model="meridian" ng-readonly="true"></td>      </tr>      <tr>        <td class="act noselect" ng-click="decreaseHour()"><i class="fa fa-angle-down"></i></td>        <td></td>        <td class="act noselect" ng-click="decreaseMinutes()"><i class="fa fa-angle-down"></i></td>        <td class="act noselect" ng-click="toggleMeridian()" ng-show="showMeridian"><i class="fa fa-angle-down"></i></td>      </tr>  </table></div>'}}]);